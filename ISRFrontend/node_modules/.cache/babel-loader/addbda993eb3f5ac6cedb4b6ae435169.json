{"ast":null,"code":"var _jsxFileName = \"/Users/varunpanigrahy/Explorer-Recommedar-RAG/ISRFrontend/src/pages/SearchPage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./SearchPage.css\";\nimport useRestaurantSearch from \"../useRestaurantSearch\";\nimport { useStateValue } from \"../StateProvider\";\nimport { Link } from \"react-router-dom\";\nimport Search from \"../components/Search\";\nimport { useHistory } from \"react-router-dom\";\nimport { actionTypes } from \"../reducer\";\nimport logo from \"../logo_one.png\";\nimport ChatBox from \"./chatbox\";\nfunction SearchPage() {\n  const [{\n    term,\n    zipCode\n  }, dispatch] = useStateValue();\n\n  // LIVE API CALL\n  const {\n    data\n  } = useRestaurantSearch(term, zipCode);\n  const history = useHistory();\n  const [chatMessages, setChatMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    if (data) {\n      setIsLoading(true);\n      fetchChatData(data);\n    }\n  }, [data]);\n  const fetchChatData = async jsonData => {\n    try {\n      const url = `http://127.0.0.1:5000/chat-data`;\n      const response = await fetch(url, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          meta: jsonData\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch chat data\");\n      }\n      const responseData = await response.json();\n      setChatMessages(responseData.messages);\n    } catch (error) {\n      console.error(\"Error fetching chat data:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  console.log(term);\n  const recommend = item => {\n    // Logic for recommending the item\n    console.log(\"Item recommended:\", item.gmap_id);\n    dispatch({\n      type: actionTypes.SET_RECOMMENDATION,\n      gmap_id: item.gmap_id\n    });\n    history.push(\"/recommendation/\" + item.name);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchPage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchPage__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"searchPage__logo\",\n    src: logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchPage__headerBody\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Search, {\n    hideButtons: true,\n    initialInput: term,\n    initialZip: zipCode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }))), term && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchPage__results\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"searchPage__resultCount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, data === null ? `Loading results for \"${term}\" near ZIP code: ${zipCode}...` : `Results for \"${term}\" near ZIP code: ${zipCode}`), data === null || data === void 0 ? void 0 : data.items.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchPage__result\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"searchPage__resultTitle\",\n    onClick: () => recommend(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 17\n    }\n  }, item.name)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"searchPage__resultSnippet\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, item.description))), data && isLoading && /*#__PURE__*/React.createElement(ChatBox, {\n    messages: [{\n      \"text\": \"Loading...\",\n      \"type\": \"bot\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 33\n    }\n  }), data && !isLoading && /*#__PURE__*/React.createElement(ChatBox, {\n    messages: chatMessages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 34\n    }\n  })));\n}\nexport default SearchPage;","map":{"version":3,"names":["React","useState","useEffect","useRestaurantSearch","useStateValue","Link","Search","useHistory","actionTypes","logo","ChatBox","SearchPage","term","zipCode","dispatch","data","history","chatMessages","setChatMessages","isLoading","setIsLoading","fetchChatData","jsonData","url","response","fetch","method","headers","body","JSON","stringify","meta","ok","Error","responseData","json","messages","error","console","log","recommend","item","gmap_id","type","SET_RECOMMENDATION","push","name","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","to","src","alt","hideButtons","initialInput","initialZip","items","map","index","key","onClick","description"],"sources":["/Users/varunpanigrahy/Explorer-Recommedar-RAG/ISRFrontend/src/pages/SearchPage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./SearchPage.css\";\nimport useRestaurantSearch from \"../useRestaurantSearch\";\nimport { useStateValue } from \"../StateProvider\";\nimport { Link } from \"react-router-dom\";\nimport Search from \"../components/Search\";\nimport { useHistory } from \"react-router-dom\";\nimport { actionTypes } from \"../reducer\";\nimport logo from \"../logo_one.png\";\nimport ChatBox from \"./chatbox\";\n\nfunction SearchPage() {\n  const [{ term, zipCode }, dispatch] = useStateValue();\n\n  // LIVE API CALL\n  const { data } = useRestaurantSearch(term, zipCode);\n  const history = useHistory();\n\n  const [chatMessages, setChatMessages] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    if (data) {\n      setIsLoading(true);\n      fetchChatData(data);\n    }\n  }, [data]);\n\n  const fetchChatData = async (jsonData) => { \n    try {\n      const url = `http://127.0.0.1:5000/chat-data`;\n      const response = await fetch(url, {\n        method: \"POST\", \n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ meta: jsonData }), \n      });\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch chat data\");\n      }\n      const responseData = await response.json(); \n      setChatMessages(responseData.messages);\n    } catch (error) {\n      console.error(\"Error fetching chat data:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  \n\n\n  console.log(term)\n  const recommend = (item) => {\n    // Logic for recommending the item\n    console.log(\"Item recommended:\", item.gmap_id);\n    dispatch({\n      type: actionTypes.SET_RECOMMENDATION,\n      gmap_id: item.gmap_id,\n    });\n    history.push(\"/recommendation/\" + item.name);\n  };\n\n  return (\n    <div className=\"searchPage\">\n      <div className=\"searchPage__header\">\n        <Link to=\"/\">\n          <img className=\"searchPage__logo\" src={logo} alt=\"\" />\n        </Link>\n        <div className=\"searchPage__headerBody\">\n          <Search hideButtons initialInput={term} initialZip={zipCode} />\n        </div>\n      </div>\n      {term && (\n        <div className=\"searchPage__results\">\n          <p className=\"searchPage__resultCount\">\n            {data === null ? `Loading results for \"${term}\" near ZIP code: ${zipCode}...` : `Results for \"${term}\" near ZIP code: ${zipCode}`}\n          </p>\n          {data?.items.map((item, index) => (\n            <div className=\"searchPage__result\" key={index}>\n              <div\n                className=\"searchPage__resultTitle\"\n                onClick={() => recommend(item)}\n              >\n                <h2>{item.name}</h2>\n              </div>\n              <p className=\"searchPage__resultSnippet\">{item.description}</p>\n            </div>\n          ))}\n          {data && isLoading && <ChatBox messages={[{\"text\": \"Loading...\", \"type\": \"bot\"}]}/>}\n          {data && !isLoading && <ChatBox messages={chatMessages} />}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default SearchPage;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAO,kBAAkB;AACzB,OAAOC,mBAAmB,MAAM,wBAAwB;AACxD,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAASC,IAAI,QAAQ,kBAAkB;AACvC,OAAOC,MAAM,MAAM,sBAAsB;AACzC,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,WAAW,QAAQ,YAAY;AACxC,OAAOC,IAAI,MAAM,iBAAiB;AAClC,OAAOC,OAAO,MAAM,WAAW;AAE/B,SAASC,UAAUA,CAAA,EAAG;EACpB,MAAM,CAAC;IAAEC,IAAI;IAAEC;EAAQ,CAAC,EAAEC,QAAQ,CAAC,GAAGV,aAAa,CAAC,CAAC;;EAErD;EACA,MAAM;IAAEW;EAAK,CAAC,GAAGZ,mBAAmB,CAACS,IAAI,EAAEC,OAAO,CAAC;EACnD,MAAMG,OAAO,GAAGT,UAAU,CAAC,CAAC;EAE5B,MAAM,CAACU,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACkB,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAEjDC,SAAS,CAAC,MAAM;IACd,IAAIa,IAAI,EAAE;MACRK,YAAY,CAAC,IAAI,CAAC;MAClBC,aAAa,CAACN,IAAI,CAAC;IACrB;EACF,CAAC,EAAE,CAACA,IAAI,CAAC,CAAC;EAEV,MAAMM,aAAa,GAAG,MAAOC,QAAQ,IAAK;IACxC,IAAI;MACF,MAAMC,GAAG,GAAG,iCAAiC;MAC7C,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,EAAE;QAChCG,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,IAAI,EAAET;QAAS,CAAC;MACzC,CAAC,CAAC;MACF,IAAI,CAACE,QAAQ,CAACQ,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;MAC9C;MACA,MAAMC,YAAY,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAAC,CAAC;MAC1CjB,eAAe,CAACgB,YAAY,CAACE,QAAQ,CAAC;IACxC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACnD,CAAC,SAAS;MACRjB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAIDkB,OAAO,CAACC,GAAG,CAAC3B,IAAI,CAAC;EACjB,MAAM4B,SAAS,GAAIC,IAAI,IAAK;IAC1B;IACAH,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEE,IAAI,CAACC,OAAO,CAAC;IAC9C5B,QAAQ,CAAC;MACP6B,IAAI,EAAEnC,WAAW,CAACoC,kBAAkB;MACpCF,OAAO,EAAED,IAAI,CAACC;IAChB,CAAC,CAAC;IACF1B,OAAO,CAAC6B,IAAI,CAAC,kBAAkB,GAAGJ,IAAI,CAACK,IAAI,CAAC;EAC9C,CAAC;EAED,oBACE9C,KAAA,CAAA+C,aAAA;IAAKC,SAAS,EAAC,YAAY;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACzBtD,KAAA,CAAA+C,aAAA;IAAKC,SAAS,EAAC,oBAAoB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACjCtD,KAAA,CAAA+C,aAAA,CAAC1C,IAAI;IAACkD,EAAE,EAAC,GAAG;IAAAN,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACVtD,KAAA,CAAA+C,aAAA;IAAKC,SAAS,EAAC,kBAAkB;IAACQ,GAAG,EAAE/C,IAAK;IAACgD,GAAG,EAAC,EAAE;IAAAR,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACjD,CAAC,eACPtD,KAAA,CAAA+C,aAAA;IAAKC,SAAS,EAAC,wBAAwB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBACrCtD,KAAA,CAAA+C,aAAA,CAACzC,MAAM;IAACoD,WAAW;IAACC,YAAY,EAAE/C,IAAK;IAACgD,UAAU,EAAE/C,OAAQ;IAAAoC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CAC3D,CACF,CAAC,EACL1C,IAAI,iBACHZ,KAAA,CAAA+C,aAAA;IAAKC,SAAS,EAAC,qBAAqB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAClCtD,KAAA,CAAA+C,aAAA;IAAGC,SAAS,EAAC,yBAAyB;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACnCvC,IAAI,KAAK,IAAI,GAAG,wBAAwBH,IAAI,oBAAoBC,OAAO,KAAK,GAAG,gBAAgBD,IAAI,oBAAoBC,OAAO,EAC9H,CAAC,EACHE,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAE8C,KAAK,CAACC,GAAG,CAAC,CAACrB,IAAI,EAAEsB,KAAK,kBAC3B/D,KAAA,CAAA+C,aAAA;IAAKC,SAAS,EAAC,oBAAoB;IAACgB,GAAG,EAAED,KAAM;IAAAd,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAC7CtD,KAAA,CAAA+C,aAAA;IACEC,SAAS,EAAC,yBAAyB;IACnCiB,OAAO,EAAEA,CAAA,KAAMzB,SAAS,CAACC,IAAI,CAAE;IAAAQ,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,gBAE/BtD,KAAA,CAAA+C,aAAA;IAAAE,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAKb,IAAI,CAACK,IAAS,CAChB,CAAC,eACN9C,KAAA,CAAA+C,aAAA;IAAGC,SAAS,EAAC,2BAA2B;IAAAC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAEb,IAAI,CAACyB,WAAe,CAC3D,CACN,CAAC,EACDnD,IAAI,IAAII,SAAS,iBAAInB,KAAA,CAAA+C,aAAA,CAACrC,OAAO;IAAC0B,QAAQ,EAAE,CAAC;MAAC,MAAM,EAAE,YAAY;MAAE,MAAM,EAAE;IAAK,CAAC,CAAE;IAAAa,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAC,CAAC,EAClFvC,IAAI,IAAI,CAACI,SAAS,iBAAInB,KAAA,CAAA+C,aAAA,CAACrC,OAAO;IAAC0B,QAAQ,EAAEnB,YAAa;IAAAgC,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,CAAE,CACtD,CAEJ,CAAC;AAEV;AAEA,eAAe3C,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module"}